{"version":3,"sources":["index.tsx"],"names":["App","giphyFetch","GiphyFetch","_useState","useState","_useState2","Object","E_Personal_6_project_final_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__","gif","setGif","_useState3","_useState4","gifs","setGifs","_useState5","_useState6","msgType","setMsgType","_useState7","_useState8","messages","setMessages","_useState9","_useState10","text","setText","textInputRef","useRef","gifAreaRef","_useState11","_useState12","isVisible","setVisible","testGifText","RegExp","handleMessage","e","preventDefault","sendGif","sendRandomGif","sendText","clearInput","msg","newDate","String","Date","toLocaleTimeString","newMessage","id","now","time","author","concat","E_Personal_6_project_final_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__","_fetchGifs","E_Personal_6_project_final_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","E_Personal_6_project_final_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee3","_yield$giphyFetch$tre","data","wrap","_context3","prev","next","trending","limit","sent","stop","apply","this","arguments","useEffect","fetchGifs","_ref","_callee","_yield$giphyFetch$ran","_context","random","fetchSearchGif","_ref2","_callee2","searchString","_yield$giphyFetch$sea","_context2","search","_x","test","current","style","display","exec","trim","react__WEBPACK_IMPORTED_MODULE_6___default","createElement","Fragment","className","map","message","key","_giphy_react_components__WEBPACK_IMPORTED_MODULE_5__","hideAttribution","noLink","width","ref","height","onGifClick","theGif","handleGifClick","onSubmit","type","placeholder","value","onChange","target","onClick","rootElement","document","getElementById","render"],"mappings":"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","file":"static/js/main.ead5dec5.chunk.js","sourcesContent":["import { GiphyFetch } from \"@giphy/js-fetch-api\";\nimport { IGif } from \"@giphy/js-types\";\nimport {Gif} from \"@giphy/react-components\";\nimport React, { useState, useRef, useEffect, RefObject, LegacyRef, ChangeEvent } from \"react\";\nimport { render } from \"react-dom\";\nimport './styles/App.css';\n\n\ninterface IMessage {\n  id?: String,\n  text: String | null,\n  time: String,\n  author: String\n  gif: IGif | null\n}\n\nfunction App() \n{\n\n  const giphyFetch = new GiphyFetch(\"325xH8P9NlRD19vhJqeFs182GlZcHYmV\");\n  const [gif, setGif] = useState<IGif | null>(null);\n  const [gifs, setGifs] = useState<IGif[] | null>([])\n  const [msgType, setMsgType] = useState('empty')\n\n  const [messages, setMessages] = useState<IMessage[]>([])\n\n  const [text, setText] = useState('');\n\n  const textInputRef = useRef<HTMLInputElement>(null)\n  const gifAreaRef = useRef<HTMLDivElement>(null)\n\n  const [isVisible, setVisible] = useState(false)\n\n  const testGifText = new RegExp(/^\\/gif\\s+([A-Za-zа-яёА-ЯЁ0-9_\\s]+)/)\n\n\n  const handleMessage = (e: ChangeEvent<any>) =>\n  {\n    e.preventDefault()\n\n    if (msgType === 'gif')\n    sendGif()\n    else if (msgType === 'random gif')\n    sendRandomGif()\n\n    else if (msgType !== 'empty')\n    sendText(text)\n\n    clearInput()\n  }\n\n\n  const sendText = (msg: string) => \n  {\n    const newDate: String = String(new Date().toLocaleTimeString())\n    const newMessage =  {\n      id: String(Date.now()),\n      text: String(msg),\n      time: newDate,\n      author: 'Евгения',\n      gif: null\n    }\n    setMessages([...messages, newMessage])\n  }\n\n\n  const clearInput = () => \n  {\n    setText('') \n  }\n\n\n  useEffect ( () =>\n  {\n    if (isVisible)\n      fetchGifs()\n\n  }, [isVisible == true])\n\n\n  async function fetchGifs() \n  {\n\n    const { data } = await giphyFetch.trending({limit: 20})\n    setGifs(data)\n  }\n\n\n  const sendRandomGif = async () =>\n  {\n    const { data } = await giphyFetch.random()\n\n    const newDate: String = String(new Date().toLocaleTimeString())\n    const newMessage =\n    {\n      id: String(Date.now()),\n      text: String(''),\n      time: newDate,\n      author: 'Евгения',\n      gif: data\n    }\n\n    setMessages([...messages, newMessage])\n  }\n\n\n  const sendGif =  () =>\n  {\n    const newDate: String = String(new Date().toLocaleTimeString())\n    const newMessage =\n    {\n      id: String(Date.now()),\n      text: String(''),\n      time: newDate,\n      author: 'Евгения',\n      gif: gif\n    }\n\n    setMessages([...messages, newMessage])\n  }\n\n\n  const fetchSearchGif = async (searchString) =>\n  {\n    const { data } = await giphyFetch.search(searchString, {limit: 20})\n    setGif(data[0])\n    setGifs(data)\n  }\n\n\n  useEffect ( () => \n  {\n    if ((/^\\/gif\\s*/).test(text) === true)\n    {\n      if (gifAreaRef.current)\n      gifAreaRef.current.style.display = 'block'\n      setVisible(true)\n      \n\n      if ((/^\\/gif\\s*$/).test(text) === true)\n      {\n        setMsgType('random gif')\n      }\n      else\n      {\n          const searchString = testGifText.exec(text)![1]\n          fetchSearchGif(searchString)\n          setMsgType('gif')\n      }\n    }\n    else if (text === '' || text.trim() === '')\n    {\n      if (gifAreaRef.current)\n      gifAreaRef.current.style.display = 'none'\n      setVisible(false)\n\n      setMsgType('empty')\n    }\n    else \n    {\n      if (gifAreaRef.current)\n      gifAreaRef.current.style.display = 'none'\n\n      setVisible(false)\n      setMsgType('text')\n    }\n\n  }, [text])\n\n\n  const handleGifClick = (theGif: IGif) =>\n  {\n    if (gifAreaRef.current)\n    gifAreaRef.current.style.display = 'none'\n    setVisible(false)\n    clearInput()\n\n    const newDate: String = String(new Date().toLocaleTimeString())\n    const newMessage =\n    {\n      id: String(Date.now()),\n      text: String(''),\n      time: newDate,\n      author: 'Евгения',\n      gif: theGif\n    }\n\n    setMessages([...messages, newMessage])\n  }\n\n\n  return (\n    <>  \n      <div className=\"App\">\n\n      <div className=\"user-area\">\n      <div className=\"message-area\">\n    \n          {messages.map(message => \n              {if (message.gif === null) \n                return (\n                  <div key={String(message.id)}>\n                    <div className=\"message\"> {message.text} </div>\n                    <div className=\"author-time\">{message.author}, {message.time}</div>\n                  </div>\n                ) \n              else\n                return (\n                  <div key={String(message.id)}>\n                      <Gif hideAttribution noLink className=\"gif\" gif={message.gif} width={150}/>\n                      <div className=\"author-time\">{message.author}, {message.time}</div>\n                  </div>\n                )\n              })\n          }\n      </div>\n\n        <hr/>\n\n        <div ref={gifAreaRef} className=\"gif-area\">\n          <div className=\"gif-grid\">   \n            {gifs!.map(gif =>\n              <Gif \n                hideAttribution noLink \n                gif={gif} width={110} height={110} \n                key={String(gif.id)} onGifClick={(gif:IGif) => handleGifClick(gif)}/>\n            )} \n          </div>\n        </div>\n\n        <form onSubmit={handleMessage} className=\"input-area\">\n          <input \n            type=\"text\"\n            className=\"message-input\" \n            placeholder=\"Введите сообщение...\"\n            ref={textInputRef}\n            value={text}\n            onChange={e => setText(e.target.value)}/>\n\n          <button type=\"none\" onClick={handleMessage} className=\"message-btn\">Send</button>\n        </form>  \n      </div>\n      </div>\n    </>\n  );\n}\n\nconst rootElement = document.getElementById(\"root\");\nrender(<App />, rootElement);\n"],"sourceRoot":""}